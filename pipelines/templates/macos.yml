steps:
- task: NodeTool@0
  inputs:
    versionSpec: '16.x'

- task: UsePythonVersion@0
  inputs:
    versionSpec: '3.x'
    addToPath: true

- script: |
    npm_config_arch="$(VSCODE_ARCH)"
    yarn install --frozen-lockfile
  displayName: Install Dependencies

- script: |
    yarn test
  displayName: Run Tests
  condition: and(succeeded(), eq(variables['VSCODE_ARCH'], 'x64'))
